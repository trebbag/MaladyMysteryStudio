# Backend-only secret. Do NOT expose this to the frontend.
OPENAI_API_KEY=

# Required for KB0 file search step (vector store id like vs_...)
KB_VECTOR_STORE_ID=

# Optional
PORT=5050

# Optional: run more than one pipeline at a time (default 1)
MAX_CONCURRENT_RUNS=1

# Optional: default keep count for terminal run cleanup policy (done/error runs, default 50)
MMS_RUN_RETENTION_KEEP_LAST=50

# Optional: override the OpenAI model used by agents (default: gpt-5.2)
MMS_MODEL=gpt-5.2

# Optional canonical profile inputs for story/visual constraints.
# If MMS_CANON_ROOT is set, server reads:
#   <root>/character_bible.md
#   <root>/series_style_bible.md
#   <root>/episode/deck_spec.md
#   <root>/episode/episode_memory.json
# If MMS_CANON_ROOT is not set, server uses:
#   <repo>/data/canon
MMS_CANON_ROOT=

# Optional explicit file overrides (take precedence over MMS_CANON_ROOT):
MMS_CHARACTER_BIBLE_PATH=
MMS_SERIES_STYLE_BIBLE_PATH=
MMS_DECK_SPEC_PATH=
MMS_EPISODE_MEMORY_PATH=

# Optional: set to 1 to disable default local canon discovery (<repo>/data/canon)
MMS_DISABLE_CANON_AUTO_DISCOVERY=0

# Optional local-only mode for deterministic test/dev runs:
# - "real" (default): full Agents SDK pipeline
# - "fake": no model calls; generates deterministic artifacts for UI/e2e testing
MMS_PIPELINE_MODE=real

# Optional fake-mode pacing in ms per step (default 80)
MMS_FAKE_STEP_DELAY_MS=80

# Optional v2 agent timeouts (ms). Low values are auto-clamped to quality-safe floors.
# KB0 floor: 60000, A/B floor: 90000, C floor: 150000.
MMS_V2_KB0_TIMEOUT_MS=120000
MMS_V2_STEP_AB_AGENT_TIMEOUT_MS=120000
MMS_V2_STEP_C_AGENT_TIMEOUT_MS=180000
# Optional dedicated timeout for the heavy deck-spec generation turn in v2 step C.
MMS_V2_STEP_C_DECKSPEC_TIMEOUT_MS=300000

# Optional v2 child-process isolation toggle:
# - default/empty: child process isolation ON
# - off|false|inprocess: disable isolation (tests/debug only)
MMS_V2_AGENT_ISOLATION_MODE=
